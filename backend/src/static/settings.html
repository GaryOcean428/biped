<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <title>Biped - Settings</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        body {
            background-color: #f9fafb;
        }
        .sidebar {
            background: linear-gradient(135deg, #0f172a 0%, #1e293b 100%);
        }
        .settings-header {
            background: linear-gradient(90deg, #3b82f6, #8b5cf6);
        }
        .nav-item {
            transition: all 0.3s ease;
        }
        .nav-item:hover {
            background-color: rgba(255, 255, 255, 0.1);
        }
        .nav-item.active {
            background-color: rgba(255, 255, 255, 0.2);
            border-left: 4px solid #3b82f6;
        }
        .tab-content {
            display: none;
        }
        .tab-content.active {
            display: block;
        }
        .btn-primary {
            background: linear-gradient(90deg, #3b82f6, #8b5cf6);
            transition: all 0.3s ease;
        }
        .btn-primary:hover {
            background: linear-gradient(90deg, #2563eb, #7c3aed);
            transform: translateY(-1px);
        }
        .input-field {
            transition: all 0.3s ease;
        }
        .input-field:focus {
            border-color: #3b82f6;
            box-shadow: 0 0 0 2px rgba(59, 130, 246, 0.3);
        }
        .toggle-switch {
            position: relative;
            display: inline-block;
            width: 48px;
            height: 24px;
        }
        .toggle-switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }
        .toggle-slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: #ccc;
            transition: .4s;
            border-radius: 24px;
        }
        .toggle-slider:before {
            position: absolute;
            content: "";
            height: 18px;
            width: 18px;
            left: 3px;
            bottom: 3px;
            background-color: white;
            transition: .4s;
            border-radius: 50%;
        }
        input:checked + .toggle-slider {
            background-color: #3b82f6;
        }
        input:checked + .toggle-slider:before {
            transform: translateX(24px);
        }
    </style>
</head>
<body class="text-gray-800">
    <div class="flex min-h-screen">
        <!-- Sidebar -->
        <div class="sidebar w-64 text-white flex-shrink-0 hidden md:block">
            <div class="p-4 flex items-center border-b border-gray-700">
                <span class="text-2xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-blue-400 to-purple-500">Biped</span>
            </div>
            <nav class="mt-6">
                <a href="/dashboard" class="nav-item flex items-center px-4 py-3 text-gray-300">
                    <i class="fas fa-tachometer-alt w-6"></i>
                    <span>Dashboard</span>
                </a>
                <a href="/profile" class="nav-item flex items-center px-4 py-3 text-gray-300">
                    <i class="fas fa-user w-6"></i>
                    <span>My Profile</span>
                </a>
                <a href="/jobs" class="nav-item flex items-center px-4 py-3 text-gray-300">
                    <i class="fas fa-briefcase w-6"></i>
                    <span>Jobs</span>
                </a>
                <a href="/messages" class="nav-item flex items-center px-4 py-3 text-gray-300">
                    <i class="fas fa-comments w-6"></i>
                    <span>Messages</span>
                </a>
                <a href="/billing" class="nav-item flex items-center px-4 py-3 text-gray-300">
                    <i class="fas fa-credit-card w-6"></i>
                    <span>Billing</span>
                </a>
                <a href="/settings" class="nav-item active flex items-center px-4 py-3 text-white">
                    <i class="fas fa-cog w-6"></i>
                    <span>Settings</span>
                </a>
                <div class="border-t border-gray-700 mt-6 pt-4 px-4">
                    <a href="#" id="logout-btn" class="flex items-center py-3 text-gray-300 hover:text-white">
                        <i class="fas fa-sign-out-alt w-6"></i>
                        <span>Logout</span>
                    </a>
                </div>
            </nav>
        </div>

        <!-- Main Content -->
        <div class="flex-1 flex flex-col">
            <!-- Top Navigation -->
            <header class="bg-white shadow-sm z-10">
                <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4 flex items-center justify-between">
                    <div class="flex items-center md:hidden">
                        <button id="mobile-menu-button" class="text-gray-500 hover:text-gray-700">
                            <i class="fas fa-bars text-xl"></i>
                        </button>
                    </div>
                    <div class="flex items-center ml-auto">
                        <div class="relative">
                            <button id="user-menu-button" class="flex items-center space-x-2 focus:outline-none">
                                <img id="user-avatar" class="h-8 w-8 rounded-full object-cover" src="https://ui-avatars.com/api/?name=John+Doe&background=3b82f6&color=fff" alt="User avatar">
                                <span id="user-name" class="hidden md:block text-sm font-medium">John Doe</span>
                                <i class="fas fa-chevron-down text-xs text-gray-400"></i>
                            </button>
                        </div>
                    </div>
                </div>
            </header>

            <!-- Settings Header -->
            <div class="settings-header text-white p-6">
                <div class="max-w-7xl mx-auto">
                    <h1 class="text-2xl font-bold">Settings</h1>
                    <p class="text-blue-100">Manage your account settings and preferences</p>
                </div>
            </div>

            <!-- Settings Tabs -->
            <div class="bg-white border-b">
                <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                    <div class="flex overflow-x-auto">
                        <button class="tab-button active whitespace-nowrap px-4 py-4 text-sm font-medium border-b-2 border-blue-500" data-tab="account-settings">
                            Account Settings
                        </button>
                        <button class="tab-button whitespace-nowrap px-4 py-4 text-sm font-medium text-gray-500 border-b-2 border-transparent hover:text-gray-700 hover:border-gray-300" data-tab="notification-settings">
                            Notification Settings
                        </button>
                        <button class="tab-button whitespace-nowrap px-4 py-4 text-sm font-medium text-gray-500 border-b-2 border-transparent hover:text-gray-700 hover:border-gray-300" data-tab="privacy-settings">
                            Privacy & Security
                        </button>
                        <button class="tab-button whitespace-nowrap px-4 py-4 text-sm font-medium text-gray-500 border-b-2 border-transparent hover:text-gray-700 hover:border-gray-300" data-tab="appearance-settings">
                            Appearance
                        </button>
                    </div>
                </div>
            </div>

            <!-- Main Content Area -->
            <main class="flex-1 overflow-y-auto p-4 sm:p-6 lg:p-8 bg-gray-50">
                <div class="max-w-7xl mx-auto">
                    <!-- Account Settings Tab -->
                    <div id="account-settings" class="tab-content active">
                        <div class="bg-white shadow rounded-lg overflow-hidden">
                            <div class="p-6">
                                <h2 class="text-lg font-medium text-gray-900">Account Settings</h2>
                                <p class="mt-1 text-sm text-gray-500">Manage your account preferences and settings.</p>
                            </div>
                            <div class="border-t border-gray-200 p-6">
                                <form id="account-settings-form" class="space-y-6">
                                    <div>
                                        <h3 class="text-md font-medium text-gray-900">Account Information</h3>
                                        <div class="mt-4 grid grid-cols-1 gap-y-6 gap-x-4 sm:grid-cols-6">
                                            <div class="sm:col-span-3">
                                                <label for="email" class="block text-sm font-medium text-gray-700">Email Address</label>
                                                <input type="email" name="email" id="email" class="input-field mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none sm:text-sm" disabled>
                                                <p class="mt-1 text-xs text-gray-500">Your email address cannot be changed.</p>
                                            </div>
                                            <div class="sm:col-span-3">
                                                <label for="username" class="block text-sm font-medium text-gray-700">Username</label>
                                                <input type="text" name="username" id="username" class="input-field mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none sm:text-sm">
                                            </div>
                                        </div>
                                    </div>

                                    <div class="pt-6 border-t border-gray-200">
                                        <h3 class="text-md font-medium text-gray-900">Language & Region</h3>
                                        <div class="mt-4 grid grid-cols-1 gap-y-6 gap-x-4 sm:grid-cols-6">
                                            <div class="sm:col-span-3">
                                                <label for="language" class="block text-sm font-medium text-gray-700">Language</label>
                                                <select id="language" name="language" class="input-field mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none sm:text-sm">
                                                    <option value="en">English</option>
                                                    <option value="es">Spanish</option>
                                                    <option value="fr">French</option>
                                                    <option value="de">German</option>
                                                </select>
                                            </div>
                                            <div class="sm:col-span-3">
                                                <label for="timezone" class="block text-sm font-medium text-gray-700">Time Zone</label>
                                                <select id="timezone" name="timezone" class="input-field mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none sm:text-sm">
                                                    <option value="UTC">UTC</option>
                                                    <option value="America/New_York">Eastern Time (ET)</option>
                                                    <option value="America/Chicago">Central Time (CT)</option>
                                                    <option value="America/Denver">Mountain Time (MT)</option>
                                                    <option value="America/Los_Angeles">Pacific Time (PT)</option>
                                                    <option value="Australia/Sydney">Australian Eastern Time (AET)</option>
                                                </select>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="pt-6 border-t border-gray-200">
                                        <h3 class="text-md font-medium text-gray-900">Accessibility</h3>
                                        <div class="mt-4 space-y-4">
                                            <div class="flex items-start">
                                                <div class="flex items-center h-5">
                                                    <input id="reduced-motion" name="reduced-motion" type="checkbox" class="h-4 w-4 text-blue-600 border-gray-300 rounded">
                                                </div>
                                                <div class="ml-3 text-sm">
                                                    <label for="reduced-motion" class="font-medium text-gray-700">Reduce motion</label>
                                                    <p class="text-gray-500">Minimize animations and transitions.</p>
                                                </div>
                                            </div>
                                            <div class="flex items-start">
                                                <div class="flex items-center h-5">
                                                    <input id="high-contrast" name="high-contrast" type="checkbox" class="h-4 w-4 text-blue-600 border-gray-300 rounded">
                                                </div>
                                                <div class="ml-3 text-sm">
                                                    <label for="high-contrast" class="font-medium text-gray-700">High contrast mode</label>
                                                    <p class="text-gray-500">Increase contrast for better readability.</p>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="flex justify-end">
                                        <button type="button" class="bg-white py-2 px-4 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none mr-3">
                                            Cancel
                                        </button>
                                        <button type="submit" class="btn-primary py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white focus:outline-none">
                                            Save Changes
                                        </button>
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>

                    <!-- Notification Settings Tab -->
                    <div id="notification-settings" class="tab-content">
                        <div class="bg-white shadow rounded-lg overflow-hidden">
                            <div class="p-6">
                                <h2 class="text-lg font-medium text-gray-900">Notification Settings</h2>
                                <p class="mt-1 text-sm text-gray-500">Manage how you receive notifications and updates.</p>
                            </div>
                            <div class="border-t border-gray-200 p-6">
                                <form id="notification-settings-form" class="space-y-6">
                                    <div>
                                        <h3 class="text-md font-medium text-gray-900">Email Notifications</h3>
                                        <div class="mt-4 space-y-4">
                                            <div class="flex items-center justify-between">
                                                <div>
                                                    <p class="text-sm font-medium text-gray-700">Job Updates</p>
                                                    <p class="text-sm text-gray-500">Receive notifications about job status changes and updates.</p>
                                                </div>
                                                <label class="toggle-switch">
                                                    <input type="checkbox" id="email-job-updates" checked>
                                                    <span class="toggle-slider"></span>
                                                </label>
                                            </div>
                                            <div class="flex items-center justify-between">
                                                <div>
                                                    <p class="text-sm font-medium text-gray-700">Messages</p>
                                                    <p class="text-sm text-gray-500">Receive notifications when you get new messages.</p>
                                                </div>
                                                <label class="toggle-switch">
                                                    <input type="checkbox" id="email-messages" checked>
                                                    <span class="toggle-slider"></span>
                                                </label>
                                            </div>
                                            <div class="flex items-center justify-between">
                                                <div>
                                                    <p class="text-sm font-medium text-gray-700">Marketing</p>
                                                    <p class="text-sm text-gray-500">Receive emails about new features, tips, and promotions.</p>
                                                </div>
                                                <label class="toggle-switch">
                                                    <input type="checkbox" id="email-marketing">
                                                    <span class="toggle-slider"></span>
                                                </label>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="pt-6 border-t border-gray-200">
                                        <h3 class="text-md font-medium text-gray-900">SMS Notifications</h3>
                                        <div class="mt-4 space-y-4">
                                            <div class="flex items-center justify-between">
                                                <div>
                                                    <p class="text-sm font-medium text-gray-700">Job Updates</p>
                                                    <p class="text-sm text-gray-500">Receive SMS notifications about job status changes and updates.</p>
                                                </div>
                                                <label class="toggle-switch">
                                                    <input type="checkbox" id="sms-job-updates">
                                                    <span class="toggle-slider"></span>
                                                </label>
                                            </div>
                                            <div class="flex items-center justify-between">
                                                <div>
                                                    <p class="text-sm font-medium text-gray-700">Messages</p>
                                                    <p class="text-sm text-gray-500">Receive SMS notifications when you get new messages.</p>
                                                </div>
                                                <label class="toggle-switch">
                                                    <input type="checkbox" id="sms-messages">
                                                    <span class="toggle-slider"></span>
                                                </label>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="pt-6 border-t border-gray-200">
                                        <h3 class="text-md font-medium text-gray-900">In-App Notifications</h3>
                                        <div class="mt-4 space-y-4">
                                            <div class="flex items-center justify-between">
                                                <div>
                                                    <p class="text-sm font-medium text-gray-700">Job Updates</p>
                                                    <p class="text-sm text-gray-500">Receive in-app notifications about job status changes and updates.</p>
                                                </div>
                                                <label class="toggle-switch">
                                                    <input type="checkbox" id="app-job-updates" checked>
                                                    <span class="toggle-slider"></span>
                                                </label>
                                            </div>
                                            <div class="flex items-center justify-between">
                                                <div>
                                                    <p class="text-sm font-medium text-gray-700">Messages</p>
                                                    <p class="text-sm text-gray-500">Receive in-app notifications when you get new messages.</p>
                                                </div>
                                                <label class="toggle-switch">
                                                    <input type="checkbox" id="app-messages" checked>
                                                    <span class="toggle-slider"></span>
                                                </label>
                                            </div>
                                            <div class="flex items-center justify-between">
                                                <div>
                                                    <p class="text-sm font-medium text-gray-700">System Updates</p>
                                                    <p class="text-sm text-gray-500">Receive in-app notifications about system updates and maintenance.</p>
                                                </div>
                                                <label class="toggle-switch">
                                                    <input type="checkbox" id="app-system" checked>
                                                    <span class="toggle-slider"></span>
                                                </label>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="flex justify-end">
                                        <button type="button" class="bg-white py-2 px-4 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none mr-3">
                                            Cancel
                                        </button>
                                        <button type="submit" class="btn-primary py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white focus:outline-none">
                                            Save Changes
                                        </button>
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>

                    <!-- Privacy & Security Tab -->
                    <div id="privacy-settings" class="tab-content">
                        <div class="bg-white shadow rounded-lg overflow-hidden">
                            <div class="p-6">
                                <h2 class="text-lg font-medium text-gray-900">Privacy & Security</h2>
                                <p class="mt-1 text-sm text-gray-500">Manage your privacy settings and account security.</p>
                            </div>
                            <div class="border-t border-gray-200 p-6">
                                <form id="privacy-settings-form" class="space-y-6">
                                    <div>
                                        <h3 class="text-md font-medium text-gray-900">Password</h3>
                                        <div class="mt-4 space-y-4">
                                            <div>
                                                <label for="current-password" class="block text-sm font-medium text-gray-700">Current Password</label>
                                                <input type="password" name="current-password" id="current-password" class="input-field mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none sm:text-sm">
                                            </div>
                                            <div>
                                                <label for="new-password" class="block text-sm font-medium text-gray-700">New Password</label>
                                                <input type="password" name="new-password" id="new-password" class="input-field mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none sm:text-sm">
                                            </div>
                                            <div>
                                                <label for="confirm-password" class="block text-sm font-medium text-gray-700">Confirm New Password</label>
                                                <input type="password" name="confirm-password" id="confirm-password" class="input-field mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none sm:text-sm">
                                            </div>
                                            <div class="flex justify-end">
                                                <button type="button" id="change-password-btn" class="btn-primary py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white focus:outline-none">
                                                    Update Password
                                                </button>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="pt-6 border-t border-gray-200">
                                        <h3 class="text-md font-medium text-gray-900">Two-Factor Authentication</h3>
                                        <div class="mt-4 space-y-4">
                                            <div class="flex items-center justify-between">
                                                <div>
                                                    <p class="text-sm font-medium text-gray-700">Enable Two-Factor Authentication</p>
                                                    <p class="text-sm text-gray-500">Add an extra layer of security to your account by requiring a verification code in addition to your password.</p>
                                                </div>
                                                <label class="toggle-switch">
                                                    <input type="checkbox" id="two-factor-auth">
                                                    <span class="toggle-slider"></span>
                                                </label>
                                            </div>
                                            <div id="two-factor-setup" class="hidden mt-4 p-4 bg-gray-50 rounded-md">
                                                <p class="text-sm text-gray-700">Scan the QR code with your authenticator app or enter the code manually.</p>
                                                <div class="mt-4 flex justify-center">
                                                    <div class="bg-white p-4 rounded-md">
                                                        <img src="https://via.placeholder.com/150" alt="QR Code" class="w-32 h-32">
                                                    </div>
                                                </div>
                                                <div class="mt-4">
                                                    <label for="verification-code" class="block text-sm font-medium text-gray-700">Verification Code</label>
                                                    <input type="text" name="verification-code" id="verification-code" class="input-field mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none sm:text-sm">
                                                </div>
                                                <div class="mt-4 flex justify-end">
                                                    <button type="button" id="verify-2fa-btn" class="btn-primary py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white focus:outline-none">
                                                        Verify
                                                    </button>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="pt-6 border-t border-gray-200">
                                        <h3 class="text-md font-medium text-gray-900">Privacy Settings</h3>
                                        <div class="mt-4 space-y-4">
                                            <div class="flex items-center justify-between">
                                                <div>
                                                    <p class="text-sm font-medium text-gray-700">Profile Visibility</p>
                                                    <p class="text-sm text-gray-500">Control who can see your profile information.</p>
                                                </div>
                                                <select id="profile-visibility" name="profile-visibility" class="input-field block w-40 border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none sm:text-sm">
                                                    <option value="public">Public</option>
                                                    <option value="private">Private</option>
                                                    <option value="contacts">Contacts Only</option>
                                                </select>
                                            </div>
                                            <div class="flex items-center justify-between">
                                                <div>
                                                    <p class="text-sm font-medium text-gray-700">Job History Visibility</p>
                                                    <p class="text-sm text-gray-500">Control who can see your job history.</p>
                                                </div>
                                                <select id="job-history-visibility" name="job-history-visibility" class="input-field block w-40 border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none sm:text-sm">
                                                    <option value="public">Public</option>
                                                    <option value="private">Private</option>
                                                    <option value="contacts">Contacts Only</option>
                                                </select>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="pt-6 border-t border-gray-200">
                                        <h3 class="text-md font-medium text-red-600">Danger Zone</h3>
                                        <div class="mt-4">
                                            <button type="button" id="deactivate-account-btn" class="inline-flex items-center px-4 py-2 border border-red-300 shadow-sm text-sm font-medium rounded-md text-red-700 bg-white hover:bg-red-50 focus:outline-none">
                                                Deactivate Account
                                            </button>
                                        </div>
                                    </div>

                                    <div class="flex justify-end">
                                        <button type="button" class="bg-white py-2 px-4 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none mr-3">
                                            Cancel
                                        </button>
                                        <button type="submit" class="btn-primary py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white focus:outline-none">
                                            Save Changes
                                        </button>
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>

                    <!-- Appearance Settings Tab -->
                    <div id="appearance-settings" class="tab-content">
                        <div class="bg-white shadow rounded-lg overflow-hidden">
                            <div class="p-6">
                                <h2 class="text-lg font-medium text-gray-900">Appearance</h2>
                                <p class="mt-1 text-sm text-gray-500">Customize the look and feel of your interface.</p>
                            </div>
                            <div class="border-t border-gray-200 p-6">
                                <form id="appearance-settings-form" class="space-y-6">
                                    <div>
                                        <h3 class="text-md font-medium text-gray-900">Theme</h3>
                                        <div class="mt-4 grid grid-cols-1 gap-y-6 gap-x-4 sm:grid-cols-3">
                                            <div class="relative">
                                                <input type="radio" id="theme-light" name="theme" value="light" class="sr-only" checked>
                                                <label for="theme-light" class="block cursor-pointer rounded-lg border border-gray-300 bg-white p-4 hover:border-blue-500 focus:outline-none">
                                                    <span class="flex items-center justify-between">
                                                        <span class="flex items-center">
                                                            <span class="text-sm font-medium text-gray-900">Light</span>
                                                        </span>
                                                        <span class="h-5 w-5 rounded-full border border-gray-300 flex items-center justify-center">
                                                            <span class="theme-radio-selected hidden h-3 w-3 rounded-full bg-blue-600"></span>
                                                        </span>
                                                    </span>
                                                    <div class="mt-2 h-16 bg-gray-100 rounded-md"></div>
                                                </label>
                                            </div>
                                            <div class="relative">
                                                <input type="radio" id="theme-dark" name="theme" value="dark" class="sr-only">
                                                <label for="theme-dark" class="block cursor-pointer rounded-lg border border-gray-300 bg-white p-4 hover:border-blue-500 focus:outline-none">
                                                    <span class="flex items-center justify-between">
                                                        <span class="flex items-center">
                                                            <span class="text-sm font-medium text-gray-900">Dark</span>
                                                        </span>
                                                        <span class="h-5 w-5 rounded-full border border-gray-300 flex items-center justify-center">
                                                            <span class="theme-radio-selected hidden h-3 w-3 rounded-full bg-blue-600"></span>
                                                        </span>
                                                    </span>
                                                    <div class="mt-2 h-16 bg-gray-800 rounded-md"></div>
                                                </label>
                                            </div>
                                            <div class="relative">
                                                <input type="radio" id="theme-system" name="theme" value="system" class="sr-only">
                                                <label for="theme-system" class="block cursor-pointer rounded-lg border border-gray-300 bg-white p-4 hover:border-blue-500 focus:outline-none">
                                                    <span class="flex items-center justify-between">
                                                        <span class="flex items-center">
                                                            <span class="text-sm font-medium text-gray-900">System</span>
                                                        </span>
                                                        <span class="h-5 w-5 rounded-full border border-gray-300 flex items-center justify-center">
                                                            <span class="theme-radio-selected hidden h-3 w-3 rounded-full bg-blue-600"></span>
                                                        </span>
                                                    </span>
                                                    <div class="mt-2 h-16 bg-gradient-to-r from-gray-100 to-gray-800 rounded-md"></div>
                                                </label>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="pt-6 border-t border-gray-200">
                                        <h3 class="text-md font-medium text-gray-900">Color Scheme</h3>
                                        <div class="mt-4 grid grid-cols-2 gap-4 sm:grid-cols-4">
                                            <div class="relative">
                                                <input type="radio" id="color-blue" name="color-scheme" value="blue" class="sr-only" checked>
                                                <label for="color-blue" class="block cursor-pointer rounded-lg border border-gray-300 p-2 hover:border-blue-500 focus:outline-none">
                                                    <div class="h-8 rounded-md bg-gradient-to-r from-blue-500 to-indigo-600"></div>
                                                    <div class="mt-2 flex items-center justify-between">
                                                        <span class="text-xs font-medium text-gray-900">Blue</span>
                                                        <span class="h-4 w-4 rounded-full border border-gray-300 flex items-center justify-center">
                                                            <span class="color-radio-selected hidden h-2 w-2 rounded-full bg-blue-600"></span>
                                                        </span>
                                                    </div>
                                                </label>
                                            </div>
                                            <div class="relative">
                                                <input type="radio" id="color-green" name="color-scheme" value="green" class="sr-only">
                                                <label for="color-green" class="block cursor-pointer rounded-lg border border-gray-300 p-2 hover:border-blue-500 focus:outline-none">
                                                    <div class="h-8 rounded-md bg-gradient-to-r from-green-500 to-emerald-600"></div>
                                                    <div class="mt-2 flex items-center justify-between">
                                                        <span class="text-xs font-medium text-gray-900">Green</span>
                                                        <span class="h-4 w-4 rounded-full border border-gray-300 flex items-center justify-center">
                                                            <span class="color-radio-selected hidden h-2 w-2 rounded-full bg-blue-600"></span>
                                                        </span>
                                                    </div>
                                                </label>
                                            </div>
                                            <div class="relative">
                                                <input type="radio" id="color-purple" name="color-scheme" value="purple" class="sr-only">
                                                <label for="color-purple" class="block cursor-pointer rounded-lg border border-gray-300 p-2 hover:border-blue-500 focus:outline-none">
                                                    <div class="h-8 rounded-md bg-gradient-to-r from-purple-500 to-fuchsia-600"></div>
                                                    <div class="mt-2 flex items-center justify-between">
                                                        <span class="text-xs font-medium text-gray-900">Purple</span>
                                                        <span class="h-4 w-4 rounded-full border border-gray-300 flex items-center justify-center">
                                                            <span class="color-radio-selected hidden h-2 w-2 rounded-full bg-blue-600"></span>
                                                        </span>
                                                    </div>
                                                </label>
                                            </div>
                                            <div class="relative">
                                                <input type="radio" id="color-orange" name="color-scheme" value="orange" class="sr-only">
                                                <label for="color-orange" class="block cursor-pointer rounded-lg border border-gray-300 p-2 hover:border-blue-500 focus:outline-none">
                                                    <div class="h-8 rounded-md bg-gradient-to-r from-orange-500 to-amber-600"></div>
                                                    <div class="mt-2 flex items-center justify-between">
                                                        <span class="text-xs font-medium text-gray-900">Orange</span>
                                                        <span class="h-4 w-4 rounded-full border border-gray-300 flex items-center justify-center">
                                                            <span class="color-radio-selected hidden h-2 w-2 rounded-full bg-blue-600"></span>
                                                        </span>
                                                    </div>
                                                </label>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="pt-6 border-t border-gray-200">
                                        <h3 class="text-md font-medium text-gray-900">Font Size</h3>
                                        <div class="mt-4">
                                            <div class="flex items-center">
                                                <span class="text-sm text-gray-500">Small</span>
                                                <input type="range" id="font-size" name="font-size" min="1" max="5" value="3" class="mx-4 w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer">
                                                <span class="text-sm text-gray-500">Large</span>
                                            </div>
                                            <div class="mt-2 text-center">
                                                <span id="font-size-preview" class="text-base font-medium text-gray-900">Preview Text</span>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="flex justify-end">
                                        <button type="button" class="bg-white py-2 px-4 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none mr-3">
                                            Cancel
                                        </button>
                                        <button type="submit" class="btn-primary py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white focus:outline-none">
                                            Save Changes
                                        </button>
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>
            </main>
        </div>
    </div>

    <!-- Mobile Sidebar -->
    <div id="mobile-sidebar" class="fixed inset-0 z-40 hidden">
        <div class="fixed inset-0 bg-gray-600 bg-opacity-75"></div>
        <div class="relative flex-1 flex flex-col max-w-xs w-full sidebar">
            <div class="absolute top-0 right-0 -mr-12 pt-2">
                <button id="close-sidebar" class="ml-1 flex items-center justify-center h-10 w-10 rounded-full focus:outline-none focus:ring-2 focus:ring-inset focus:ring-white">
                    <span class="sr-only">Close sidebar</span>
                    <i class="fas fa-times text-white"></i>
                </button>
            </div>
            <div class="p-4 flex items-center border-b border-gray-700">
                <span class="text-2xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-blue-400 to-purple-500">Biped</span>
            </div>
            <nav class="mt-6">
                <a href="/dashboard" class="nav-item flex items-center px-4 py-3 text-gray-300">
                    <i class="fas fa-tachometer-alt w-6"></i>
                    <span>Dashboard</span>
                </a>
                <a href="/profile" class="nav-item flex items-center px-4 py-3 text-gray-300">
                    <i class="fas fa-user w-6"></i>
                    <span>My Profile</span>
                </a>
                <a href="/jobs" class="nav-item flex items-center px-4 py-3 text-gray-300">
                    <i class="fas fa-briefcase w-6"></i>
                    <span>Jobs</span>
                </a>
                <a href="/messages" class="nav-item flex items-center px-4 py-3 text-gray-300">
                    <i class="fas fa-comments w-6"></i>
                    <span>Messages</span>
                </a>
                <a href="/billing" class="nav-item flex items-center px-4 py-3 text-gray-300">
                    <i class="fas fa-credit-card w-6"></i>
                    <span>Billing</span>
                </a>
                <a href="/settings" class="nav-item active flex items-center px-4 py-3 text-white">
                    <i class="fas fa-cog w-6"></i>
                    <span>Settings</span>
                </a>
                <div class="border-t border-gray-700 mt-6 pt-4 px-4">
                    <a href="#" class="mobile-logout-btn flex items-center py-3 text-gray-300 hover:text-white">
                        <i class="fas fa-sign-out-alt w-6"></i>
                        <span>Logout</span>
                    </a>
                </div>
            </nav>
        </div>
    </div>

    <!-- Success Notification -->
    <div id="success-notification" class="fixed inset-0 flex items-end justify-center px-4 py-6 pointer-events-none sm:p-6 sm:items-start sm:justify-end z-50 hidden">
        <div class="max-w-sm w-full bg-white shadow-lg rounded-lg pointer-events-auto ring-1 ring-black ring-opacity-5 overflow-hidden">
            <div class="p-4">
                <div class="flex items-start">
                    <div class="flex-shrink-0">
                        <i class="fas fa-check-circle text-green-400 text-lg"></i>
                    </div>
                    <div class="ml-3 w-0 flex-1 pt-0.5">
                        <p class="text-sm font-medium text-gray-900" id="notification-message">Successfully saved changes!</p>
                    </div>
                    <div class="ml-4 flex-shrink-0 flex">
                        <button id="close-notification" class="bg-white rounded-md inline-flex text-gray-400 hover:text-gray-500 focus:outline-none">
                            <span class="sr-only">Close</span>
                            <i class="fas fa-times"></i>
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Tab switching
            const tabButtons = document.querySelectorAll('.tab-button');
            const tabContents = document.querySelectorAll('.tab-content');
            
            tabButtons.forEach(button => {
                button.addEventListener('click', () => {
                    // Remove active class from all buttons and contents
                    tabButtons.forEach(btn => btn.classList.remove('active', 'border-blue-500', 'text-blue-600'));
                    tabButtons.forEach(btn => btn.classList.add('text-gray-500', 'border-transparent'));
                    tabContents.forEach(content => content.classList.remove('active'));
                    
                    // Add active class to clicked button and corresponding content
                    button.classList.add('active', 'border-blue-500', 'text-blue-600');
                    button.classList.remove('text-gray-500', 'border-transparent');
                    document.getElementById(button.dataset.tab).classList.add('active');
                });
            });
            
            // Mobile menu
            const mobileMenuButton = document.getElementById('mobile-menu-button');
            const mobileSidebar = document.getElementById('mobile-sidebar');
            const closeSidebar = document.getElementById('close-sidebar');
            
            mobileMenuButton.addEventListener('click', () => {
                mobileSidebar.classList.remove('hidden');
            });
            
            closeSidebar.addEventListener('click', () => {
                mobileSidebar.classList.add('hidden');
            });
            
            // Theme selection
            const themeRadios = document.querySelectorAll('input[name="theme"]');
            const themeRadioSelected = document.querySelectorAll('.theme-radio-selected');
            
            themeRadios.forEach((radio, index) => {
                if (radio.checked) {
                    themeRadioSelected[index].classList.remove('hidden');
                }
                
                radio.addEventListener('change', () => {
                    themeRadioSelected.forEach(selected => selected.classList.add('hidden'));
                    if (radio.checked) {
                        themeRadioSelected[index].classList.remove('hidden');
                    }
                });
            });
            
            // Color scheme selection
            const colorRadios = document.querySelectorAll('input[name="color-scheme"]');
            const colorRadioSelected = document.querySelectorAll('.color-radio-selected');
            
            colorRadios.forEach((radio, index) => {
                if (radio.checked) {
                    colorRadioSelected[index].classList.remove('hidden');
                }
                
                radio.addEventListener('change', () => {
                    colorRadioSelected.forEach(selected => selected.classList.add('hidden'));
                    if (radio.checked) {
                        colorRadioSelected[index].classList.remove('hidden');
                    }
                });
            });
            
            // Font size slider
            const fontSizeSlider = document.getElementById('font-size');
            const fontSizePreview = document.getElementById('font-size-preview');
            
            fontSizeSlider.addEventListener('input', () => {
                const fontSize = parseInt(fontSizeSlider.value);
                let previewSize;
                
                switch (fontSize) {
                    case 1:
                        previewSize = 'text-xs';
                        break;
                    case 2:
                        previewSize = 'text-sm';
                        break;
                    case 3:
                        previewSize = 'text-base';
                        break;
                    case 4:
                        previewSize = 'text-lg';
                        break;
                    case 5:
                        previewSize = 'text-xl';
                        break;
                    default:
                        previewSize = 'text-base';
                }
                
                fontSizePreview.className = `${previewSize} font-medium text-gray-900`;
            });
            
            // Two-factor authentication toggle
            const twoFactorToggle = document.getElementById('two-factor-auth');
            const twoFactorSetup = document.getElementById('two-factor-setup');
            
            twoFactorToggle.addEventListener('change', () => {
                if (twoFactorToggle.checked) {
                    twoFactorSetup.classList.remove('hidden');
                } else {
                    twoFactorSetup.classList.add('hidden');
                }
            });
            
            // Forms and notifications
            const accountSettingsForm = document.getElementById('account-settings-form');
            const notificationSettingsForm = document.getElementById('notification-settings-form');
            const privacySettingsForm = document.getElementById('privacy-settings-form');
            const appearanceSettingsForm = document.getElementById('appearance-settings-form');
            const successNotification = document.getElementById('success-notification');
            const closeNotification = document.getElementById('close-notification');
            const notificationMessage = document.getElementById('notification-message');
            
            // Helper function to show notification
            function showNotification(message) {
                notificationMessage.textContent = message;
                successNotification.classList.remove('hidden');
                setTimeout(() => {
                    successNotification.classList.add('hidden');
                }, 3000);
            }
            
            closeNotification.addEventListener('click', () => {
                successNotification.classList.add('hidden');
            });
            
            // Account settings form submission
            accountSettingsForm.addEventListener('submit', (e) => {
                e.preventDefault();
                
                // Get form data
                const formData = {
                    username: document.getElementById('username').value,
                    language: document.getElementById('language').value,
                    timezone: document.getElementById('timezone').value,
                    accessibility: {
                        reduced_motion: document.getElementById('reduced-motion').checked,
                        high_contrast: document.getElementById('high-contrast').checked
                    }
                };
                
                // Send data to API
                fetch('/api/users/settings', {
                    method: 'PUT',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify(formData),
                    credentials: 'include'
                })
                .then(response => {
                    if (!response.ok) {
                        throw new Error('Failed to update settings');
                    }
                    return response.json();
                })
                .then(data => {
                    showNotification('Account settings updated successfully!');
                })
                .catch(error => {
                    console.error('Error updating settings:', error);
                    showNotification('Failed to update settings. Please try again.');
                });
            });
            
            // Notification settings form submission
            notificationSettingsForm.addEventListener('submit', (e) => {
                e.preventDefault();
                
                // Get form data
                const formData = {
                    email_notifications: {
                        job_updates: document.getElementById('email-job-updates').checked,
                        messages: document.getElementById('email-messages').checked,
                        marketing: document.getElementById('email-marketing').checked
                    },
                    sms_notifications: {
                        job_updates: document.getElementById('sms-job-updates').checked,
                        messages: document.getElementById('sms-messages').checked
                    },
                    app_notifications: {
                        job_updates: document.getElementById('app-job-updates').checked,
                        messages: document.getElementById('app-messages').checked,
                        system: document.getElementById('app-system').checked
                    }
                };
                
                // Send data to API
                fetch('/api/users/notifications', {
                    method: 'PUT',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify(formData),
                    credentials: 'include'
                })
                .then(response => {
                    if (!response.ok) {
                        throw new Error('Failed to update notification settings');
                    }
                    return response.json();
                })
                .then(data => {
                    showNotification('Notification settings updated successfully!');
                })
                .catch(error => {
                    console.error('Error updating notification settings:', error);
                    showNotification('Failed to update notification settings. Please try again.');
                });
            });
            
            // Privacy settings form submission
            privacySettingsForm.addEventListener('submit', (e) => {
                e.preventDefault();
                
                // Get form data
                const formData = {
                    privacy: {
                        profile_visibility: document.getElementById('profile-visibility').value,
                        job_history_visibility: document.getElementById('job-history-visibility').value
                    }
                };
                
                // Send data to API
                fetch('/api/users/privacy', {
                    method: 'PUT',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify(formData),
                    credentials: 'include'
                })
                .then(response => {
                    if (!response.ok) {
                        throw new Error('Failed to update privacy settings');
                    }
                    return response.json();
                })
                .then(data => {
                    showNotification('Privacy settings updated successfully!');
                })
                .catch(error => {
                    console.error('Error updating privacy settings:', error);
                    showNotification('Failed to update privacy settings. Please try again.');
                });
            });
            
            // Change password button
            const changePasswordBtn = document.getElementById('change-password-btn');
            
            changePasswordBtn.addEventListener('click', () => {
                const currentPassword = document.getElementById('current-password').value;
                const newPassword = document.getElementById('new-password').value;
                const confirmPassword = document.getElementById('confirm-password').value;
                
                if (!currentPassword || !newPassword || !confirmPassword) {
                    showNotification('Please fill in all password fields.');
                    return;
                }
                
                if (newPassword !== confirmPassword) {
                    showNotification('New passwords do not match.');
                    return;
                }
                
                // Send data to API
                fetch('/api/auth/change-password', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        current_password: currentPassword,
                        new_password: newPassword
                    }),
                    credentials: 'include'
                })
                .then(response => {
                    if (!response.ok) {
                        throw new Error('Failed to change password');
                    }
                    return response.json();
                })
                .then(data => {
                    showNotification('Password changed successfully!');
                    document.getElementById('current-password').value = '';
                    document.getElementById('new-password').value = '';
                    document.getElementById('confirm-password').value = '';
                })
                .catch(error => {
                    console.error('Error changing password:', error);
                    showNotification('Failed to change password. Please check your current password and try again.');
                });
            });
            
            // Appearance settings form submission
            appearanceSettingsForm.addEventListener('submit', (e) => {
                e.preventDefault();
                
                // Get selected theme
                let selectedTheme;
                document.querySelectorAll('input[name="theme"]').forEach(radio => {
                    if (radio.checked) {
                        selectedTheme = radio.value;
                    }
                });
                
                // Get selected color scheme
                let selectedColorScheme;
                document.querySelectorAll('input[name="color-scheme"]').forEach(radio => {
                    if (radio.checked) {
                        selectedColorScheme = radio.value;
                    }
                });
                
                // Get font size
                const fontSize = document.getElementById('font-size').value;
                
                // Get form data
                const formData = {
                    appearance: {
                        theme: selectedTheme,
                        color_scheme: selectedColorScheme,
                        font_size: fontSize
                    }
                };
                
                // Send data to API
                fetch('/api/users/appearance', {
                    method: 'PUT',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify(formData),
                    credentials: 'include'
                })
                .then(response => {
                    if (!response.ok) {
                        throw new Error('Failed to update appearance settings');
                    }
                    return response.json();
                })
                .then(data => {
                    showNotification('Appearance settings updated successfully!');
                })
                .catch(error => {
                    console.error('Error updating appearance settings:', error);
                    showNotification('Failed to update appearance settings. Please try again.');
                });
            });
            
            // Deactivate account button
            const deactivateAccountBtn = document.getElementById('deactivate-account-btn');
            
            deactivateAccountBtn.addEventListener('click', () => {
                if (confirm('Are you sure you want to deactivate your account? This action cannot be undone.')) {
                    fetch('/api/users/deactivate', {
                        method: 'POST',
                        credentials: 'include'
                    })
                    .then(response => {
                        if (!response.ok) {
                            throw new Error('Failed to deactivate account');
                        }
                        return response.json();
                    })
                    .then(data => {
                        window.location.href = '/';
                    })
                    .catch(error => {
                        console.error('Error deactivating account:', error);
                        showNotification('Failed to deactivate account. Please try again.');
                    });
                }
            });
            
            // Logout functionality
            const logoutBtn = document.getElementById('logout-btn');
            const mobileLogoutBtn = document.querySelector('.mobile-logout-btn');
            
            function handleLogout() {
                fetch('/api/auth/logout', {
                    method: 'POST',
                    credentials: 'include'
                })
                .then(response => {
                    if (!response.ok) {
                        throw new Error('Logout failed');
                    }
                    return response.json();
                })
                .then(data => {
                    window.location.href = '/';
                })
                .catch(error => {
                    console.error('Logout error:', error);
                    window.location.href = '/';
                });
            }
            
            logoutBtn.addEventListener('click', handleLogout);
            mobileLogoutBtn.addEventListener('click', handleLogout);
            
            // Load user data
            function loadUserData() {
                fetch('/api/auth/me', {
                    method: 'GET',
                    credentials: 'include'
                })
                .then(response => {
                    if (!response.ok) {
                        // Not authenticated, redirect to login
                        window.location.href = '/';
                        throw new Error('Not authenticated');
                    }
                    return response.json();
                })
                .then(data => {
                    // Update user info in header
                    const user = data.user;
                    
                    document.getElementById('user-name').textContent = `${user.first_name} ${user.last_name}`;
                    document.getElementById('user-avatar').src = `https://ui-avatars.com/api/?name=${user.first_name}+${user.last_name}&background=3b82f6&color=fff`;
                    
                    // Fill account settings form
                    document.getElementById('email').value = user.email || '';
                    document.getElementById('username').value = user.username || '';
                    
                    // Set language and timezone if available
                    if (user.settings && user.settings.language) {
                        document.getElementById('language').value = user.settings.language;
                    }
                    
                    if (user.settings && user.settings.timezone) {
                        document.getElementById('timezone').value = user.settings.timezone;
                    }
                    
                    // Set accessibility options if available
                    if (user.settings && user.settings.accessibility) {
                        document.getElementById('reduced-motion').checked = user.settings.accessibility.reduced_motion || false;
                        document.getElementById('high-contrast').checked = user.settings.accessibility.high_contrast || false;
                    }
                    
                    // Set notification preferences if available
                    if (user.settings && user.settings.notifications) {
                        const notifications = user.settings.notifications;
                        
                        if (notifications.email) {
                            document.getElementById('email-job-updates').checked = notifications.email.job_updates || false;
                            document.getElementById('email-messages').checked = notifications.email.messages || false;
                            document.getElementById('email-marketing').checked = notifications.email.marketing || false;
                        }
                        
                        if (notifications.sms) {
                            document.getElementById('sms-job-updates').checked = notifications.sms.job_updates || false;
                            document.getElementById('sms-messages').checked = notifications.sms.messages || false;
                        }
                        
                        if (notifications.app) {
                            document.getElementById('app-job-updates').checked = notifications.app.job_updates || false;
                            document.getElementById('app-messages').checked = notifications.app.messages || false;
                            document.getElementById('app-system').checked = notifications.app.system || false;
                        }
                    }
                    
                    // Set privacy settings if available
                    if (user.settings && user.settings.privacy) {
                        document.getElementById('profile-visibility').value = user.settings.privacy.profile_visibility || 'public';
                        document.getElementById('job-history-visibility').value = user.settings.privacy.job_history_visibility || 'public';
                    }
                    
                    // Set appearance settings if available
                    if (user.settings && user.settings.appearance) {
                        const appearance = user.settings.appearance;
                        
                        // Set theme
                        if (appearance.theme) {
                            document.querySelectorAll('input[name="theme"]').forEach(radio => {
                                if (radio.value === appearance.theme) {
                                    radio.checked = true;
                                    const index = Array.from(document.querySelectorAll('input[name="theme"]')).indexOf(radio);
                                    document.querySelectorAll('.theme-radio-selected')[index].classList.remove('hidden');
                                }
                            });
                        }
                        
                        // Set color scheme
                        if (appearance.color_scheme) {
                            document.querySelectorAll('input[name="color-scheme"]').forEach(radio => {
                                if (radio.value === appearance.color_scheme) {
                                    radio.checked = true;
                                    const index = Array.from(document.querySelectorAll('input[name="color-scheme"]')).indexOf(radio);
                                    document.querySelectorAll('.color-radio-selected')[index].classList.remove('hidden');
                                }
                            });
                        }
                        
                        // Set font size
                        if (appearance.font_size) {
                            document.getElementById('font-size').value = appearance.font_size;
                            // Trigger the input event to update the preview
                            const event = new Event('input');
                            document.getElementById('font-size').dispatchEvent(event);
                        }
                    }
                })
                .catch(error => {
                    console.error('Error loading user data:', error);
                });
            }
            
            // Load user data on page load
            loadUserData();
        });
    </script>
</body>
</html>

